

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@using Microsoft.AspNetCore.Identity@model PernicekWeb.Models.ItemViewModels.Product

@{
    ViewData["Title"] = "Item";
}

<div class="product-page">
    <form asp-controller="Order" asp-action="Index" method="get">
        <div class="page-header header-filter header-small item-header-custom" data-parallax="true">

        </div>

        <div class="section">
            <div class="container">
                <div class="main main-raised main-product">
                    <div class="row">

                        <!-- Gallery -->
                        <div class="col-md-6 col-sm-6">

                            <!-- Main Picture -->
                            <div class="tab-content">
                                <div class="tab-pane active" id="product-img-1">
                                    <img src="@Html.DisplayFor(modelItem => Model.images[0].link)" />
                                </div>
                                @if (Model.images.Count() > 1)
                                {
                                    @for (int number = 1, count = Model.images.Count(); number < count; number++)
                                    {
                                        <div class="tab-pane" id="@number">
                                            <img src="@Html.DisplayFor(modelItem => Model.images[number].link)" />
                                        </div>
                                    }
                                }
                            </div>
                            <!-- End Main Picture -->
                            <!-- Picture Selection -->
                            @if (Model.images.Count() > 1)
                            {
                                <ul class="nav flexi-nav" role="tablist" id="flexiselDemo1">
                                    <li class="active">
                                        <a href="#product-img-1" role="tab" data-toggle="tab" aria-expanded="false">
                                            <img src="@Html.DisplayFor(modelItem => Model.images[0].link)" />
                                        </a>
                                    </li>
                                    @for (int number = 1, count = Model.images.Count(); number < count; number++)
                                    {
                                        <li>
                                            <a href="#@number" role="tab" data-toggle="tab" aria-expanded="false">
                                                <img src="@Html.DisplayFor(modelItem => Model.images[number].link)" />
                                            </a>
                                        </li>
                                    }
                                </ul>
                            }
                            <!-- End Picture Selection -->

                        </div>
                        <!-- End Gallery-->
                        <!-- Text (Headline, Price, Description...) -->
                        <div class="col-md-6 col-sm-6">

                            <!-- Headline -->
                            <h2 class="title"> @Html.DisplayFor(modelItem => Model.name) </h2>

                            <!-- Price -->
                            <h3 class="main-price">&euro; @Html.DisplayFor(modelItem => Model.price)</h3>

                            <!-- Brand -->
                            <h3 class="description"><b>@Html.DisplayFor(modelItem => Model.firm) </b></h3>

                            <!-- Tags -->
                            <span class="label label-danger">@Html.DisplayFor(modelItem => Model.category)</span>
                            <span class="label label-rose">@Html.DisplayFor(modelItem => Model.sub_category)</span>

                            <!-- Acordeon -->
                            <div id="acordeon">
                                <div class="panel-group" id="accordion">

                                    <!-- Description -->
                                    <div class="panel panel-border panel-default">
                                        <div class="panel-heading" role="tab" id="headingOne">
                                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                <h4 class="panel-title">
                                                    Description
                                                    <i class="material-icons">keyboard_arrow_down</i>
                                                </h4>
                                            </a>
                                        </div>
                                        <div id="collapseOne" class="panel-collapse collapse in">
                                            <div class="panel-body">
                                                <p>@Html.DisplayFor(modelItem => Model.description)</p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Description -->
                                    <!-- Brand Information -->
                                    <div class="panel panel-border panel-default">
                                        <div class="panel-heading" role="tab" id="headingOne">
                                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-controls="collapseOne">
                                                <h4 class="panel-title">
                                                    Brand Information
                                                    <i class="material-icons">keyboard_arrow_down</i>
                                                </h4>
                                            </a>
                                        </div>
                                        <div id="collapseTwo" class="panel-collapse collapse">
                                            <div class="panel-body">
                                                Brand Information
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Brand Information -->

                                </div>
                            </div>
                            <!-- End Acordeon -->
                            <!-- Colour and Size -->
                            <div class="row pick-size">
                                <div class="col-md-6 col-sm-6">
                                    <label>Select color</label>
                                    <select id="Colours" name="Colours" class="selectpicker" data-style="select-with-transition" data-size="7">
                                        @foreach (var i in Model.colours)
                                        {
                                            <option value="@i.rgb">@Html.DisplayFor(modelItem => i.name)</option>
                                        }
                                    </select>
                                </div>
                                <div class="col-md-6 col-sm-6">
                                    <label>Select size</label>
                                    <select id="Sizes" name="Sizes" class="selectpicker" data-style="select-with-transition" data-size="7">
                                        @foreach (var i in Model.sizes)
                                        {
                                            <option value="@i.id_si">@Html.DisplayFor(modelItem => i.uk)</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <!-- End Colour and size -->
                            <label style="display: none;">
                                <input type="hidden"
                                       name="Idecko"
                                       value="@Model.id_pr" />
                            </label>
                            <!-- Add to bag Button -->
                            <div class="form-group text-center">
                                <button type="submit" class="btn btn-warning btn-round" value="Add to cart" /><i>Add to cart</i>
                            </div>
                            <!-- End Add to bag Button-->

                        </div>
                        <!-- End Text-->

                    </div>
                </div>
                <!-- Service features -->
                <div class="features text-center">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="info">
                                <div class="icon icon-info">
                                    <i class="material-icons">local_shipping</i>
                                </div>
                                <h4 class="info-title">2 Days Delivery </h4>
                                <p>Divide details about your product or agency work into parts. Write a few lines about each one. A paragraph describing a feature will be enough.</p>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="info">
                                <div class="icon icon-success">
                                    <i class="material-icons">verified_user</i>
                                </div>
                                <h4 class="info-title">Refundable Policy</h4>
                                <p>Divide details about your product or agency work into parts. Write a few lines about each one. A paragraph describing a feature will be enough.</p>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="info">
                                <div class="icon icon-rose">
                                    <i class="material-icons">favorite</i>
                                </div>
                                <h4 class="info-title">Popular Item</h4>
                                <p>Divide details about your product or agency work into parts. Write a few lines about each one. A paragraph describing a feature will be enough.</p>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- End Service features -->
                <!-- Related products -->
                <div class="related-products">
                    <h3 class="title text-center">You may also be interested in:</h3>

                    <div class="row">
                        <div class="col-sm-6 col-md-3">
                            <div class="card card-product">
                                <div class="card-image">
                                    <a href="#pablo">
                                        <img class="img" src="@Html.DisplayFor(modelItem => Model.images[0].link)" />
                                    </a>
                                </div>

                                <div class="card-content">
                                    <h6 class="category text-rose">Trending</h6>
                                    <h4 class="card-title">
                                        <a href="#pablo">Dolce & Gabbana</a>
                                    </h4>
                                    <div class="card-description">
                                        Dolce & Gabbana's 'Greta' tote has been crafted in Italy from hard-wearing red textured-leather.
                                    </div>
                                    <div class="footer">
                                        <div class="price">
                                            <h4>$1,459</h4>
                                        </div>
                                        <div class="stats">
                                            <button type="button" rel="tooltip" title="Saved to Wishlist" class="btn btn-just-icon btn-simple btn-warning">
                                                <i class="material-icons">favorite</i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="card card-product">
                                <div class="card-image">
                                    <a href="#pablo">
                                        <img class="img" src="@Html.DisplayFor(modelItem => Model.images[0].link)" />
                                    </a>
                                </div>
                                <div class="card-content">
                                    <h6 class="category text-muted">Popular</h6>
                                    <h4 class="card-title">
                                        <a href="#pablo">Balmain</a>
                                    </h4>
                                    <div class="card-description">
                                        Balmain's mid-rise skinny jeans are cut with stretch to ensure they retain their second-skin fit but move comfortably.
                                    </div>
                                    <div class="footer">
                                        <div class="price">
                                            <h4>$459</h4>
                                        </div>
                                        <div class="stats">
                                            <button type="button" rel="tooltip" title="Save to Wishlist" class="btn btn-just-icon btn-simple btn-default">
                                                <i class="material-icons">favorite</i>
                                            </button>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>

                        <div class="col-sm-6 col-md-3">
                            <div class="card card-product">
                                <div class="card-image">
                                    <a href="#pablo">
                                        <img class="img" src="@Html.DisplayFor(modelItem => Model.images[0].link)" alt="..." />
                                    </a>
                                </div>

                                <div class="card-content">
                                    <h6 class="category text-muted">Popular</h6>
                                    <h4 class="card-title">
                                        <a href="#pablo">Balenciaga</a>
                                    </h4>
                                    <div class="card-description">
                                        Balenciaga's black textured-leather wallet is finished with the label's iconic 'Giant' studs. This is where you can...
                                    </div>
                                    <div class="footer">
                                        <div class="price">
                                            <h4>$590</h4>
                                        </div>
                                        <div class="stats">
                                            <button type="button" rel="tooltip" title="Saved to Wishlist" class="btn btn-just-icon btn-simple btn-warning">
                                                <i class="material-icons">favorite</i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-md-3">
                            <div class="card card-product">
                                <div class="card-image">
                                    <a href="#pablo">
                                        <img class="img" src="@Html.DisplayFor(modelItem => Model.images[0].link)" />
                                    </a>
                                </div>

                                <div class="card-content">
                                    <h6 class="category text-rose">Trending</h6>
                                    <h4 class="card-title">
                                        <a href="#pablo">Dolce & Gabbana</a>
                                    </h4>
                                    <div class="card-description">
                                        Dolce & Gabbana's 'Greta' tote has been crafted in Italy from hard-wearing red textured-leather.
                                    </div>
                                    <div class="footer">
                                        <div class="price">
                                            <h4>$1,459</h4>
                                        </div>
                                        <div class="stats">
                                            <button type="button" rel="tooltip" title="Save to Wishlist" class="btn btn-just-icon btn-simple btn-default">
                                                <i class="material-icons">favorite</i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </form>
                <!-- End Related Products -->
                <!-- Comments -->

                <div id="comments">
                    <div class="row">
                        <div class="col-md-8 col-md-offset-2">
                            <div class="media-area">
                                <!-- Number of comments -->
                                <h3 class="title text-center">@Model.AmountOfComments comments</h3>
                                <!-- End Number of comments -->
                                <!-- First comment -->
                                @for (var i = 0; i < Model.AmountOfComments; ++i)
                                {
                                    @if (Model.comments[i].parent_com == null)
                                    {
                                        <div class="media">
                                            <!-- User Avatar -->
                                            <a class="pull-left" href="#pablo">
                                                <div class="avatar">
                                                    <img class="media-object" src="~/images/default-avatar.png" alt="..." />
                                                </div>
                                            </a>
                                            <!-- End User Avatar -->
                                            <!-- Comment Content -->
                                            <div class="media-body">
                                                <!-- Name of User and time -->
                                                <h4 class="media-heading">@Model.comments[i].UsersName<small> &middot; @Model.comments[i].date.ToString("MM/dd/yyyy")</small></h4>
                                                <!-- End Name of User and time -->
                                                <!-- Comment Topic -->
                                                <h6 class="text-muted">Topic</h6> <!-- leave empty if no topic defined -->
                                                <!-- End Comment Topic -->
                                                <!-- Comment text -->
                                                <p>@Model.comments[i].comment</p>
                                                <!-- End Comment text-->
                                                <!-- Comment Footer - buttons -->
                                                <div class="media-footer">
                                                    <!-- Reply Button -->
                                                    @await Html.PartialAsync("_Reply")
                                                    <!-- End Reply Button -->
                                                    <!-- Like -->
                                                    <a href="#pablo" class="btn btn-danger btn-simple pull-right">
                                                        <i class="material-icons">favorite</i> @Model.comments[i].thumb_up
                                                    </a>
                                                    <!-- End Like -->
                                                    <!-- Dislike -->
                                                    <a href="#pablo" class="btn btn-default btn-simple pull-right">
                                                        <i class="fa fa-thumbs-down" aria-hidden="true"></i> @Model.comments[i].thumb_down
                                                    </a>
                                                    <!-- End Dislike -->
                                                </div>
                                                <!-- End Comment Footer - bottons -->
                                                <!-- Reply -->
                                                @for (var t = i + 1; t < Model.AmountOfComments; ++t)
                                                {
                                                    if (Model.comments[t].parent_com == Model.comments[i].id_com)
                                                    {
                                                        <div class="media">
                                                            <!-- User Avatar -->
                                                            <a class="pull-left" href="#pablo">
                                                                <div class="avatar">
                                                                    <img class="media-object" alt="64x64" src="~/images/default-avatar.png">
                                                                </div>
                                                            </a>
                                                            <!-- End User Avatar -->
                                                            <!-- Reply Content -->
                                                            <div class="media-body">
                                                                <!-- Name of User and time -->
                                                                <h4 class="media-heading">@Model.comments[t].UsersName<small>&middot; @Model.comments[i].date.ToString("MM/dd/yyyy")</small></h4>
                                                                <!-- End Name of User and time -->
                                                                <!-- Reply text -->
                                                                <p>@Model.comments[t].comment</p>
                                                                <!-- End Reply text -->
                                                                <!-- Reply footer - Buttons -->
                                                                <div class="media-footer">
                                                                    <!-- Like -->
                                                                    <a href="#pablo" class="btn btn-danger btn-simple pull-right">
                                                                        <i class="material-icons">favorite</i> @Model.comments[t].thumb_up
                                                                    </a>
                                                                    <!-- End Like -->
                                                                    <!-- Dislike -->
                                                                    <a href="#pablo" class="btn btn-default btn-simple pull-right">
                                                                        <i class="fa fa-thumbs-down" aria-hidden="true"></i> @Model.comments[t].thumb_down
                                                                    </a>
                                                                    <!-- End Dislike -->
                                                                </div>
                                                                <!-- End Reply footer - Bottons -->
                                                            </div>
                                                            <!-- End Reply Content -->
                                                        </div>
                                                <!-- End Reply -->
                                                    }
                                                }
                                            </div>
                                            <!-- End Comment Content -->
                                        </div>
                                    }
                                }
                                <!-- End First Comment -->
                                <!-- Pagination -->
                                <div class="pagination-area text-center">
                                    <ul class="pagination pagination-warning">
                                        <li><a href="#pablo">&laquo;</a></li>
                                        <li><a href="#pablo">1</a></li>
                                        <li><a href="#pablo">2</a></li>
                                        <li class="active"><a href="#pablo">3</a></li>
                                        <li><a href="#pablo">4</a></li>
                                        <li><a href="#pablo">5</a></li>
                                        <li><a href="#pablo">&raquo;</a></li>
                                    </ul>
                                </div>
                                <!-- End Pagination -->
                            </div>

                            @if (SignInManager.IsSignedIn(User))
                            {
                                <div class="input-group">
                                    <a data-toggle="modal" data-target="#PostYourComment" class="btn btn-warning btn-lg">Post your comment</a>

                                </div>

                            }
                            else
                            {
                                <div class="text-center">
                                    <a data-toggle="modal" data-target="#logIn" class="btn btn-warning btn-lg">Post your comment</a>
                                </div>
                            }
                            <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
                            <!-- Post Your Comment -->
                            <div class="modal fade" id="PostYourComment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog" style="margin-top: 10%;">
                                    <div class="card card-signup custom-box-shadow">
                                        <div class="header text-center custom-header custom-modal-header">
                                            <i class="material-icons">comment</i>
                                        </div>
                                        <h3 class="text-center custom-modal-h">Post Your Comment</h3>
                                        <div class="card-content" style="padding-right: 0;">
                                            <div class="media media-post">
                                                <div class="media-body">
                                                    <textarea id="NewComment" class="form-control" placeholder="Write some nice stuff or nothing..." rows="6"></textarea>
                                                    <div class="media-footer">
                                                        <a id="PostNewComment" class="btn btn-warning btn-wd pull-right btn-success">Post Comment</a>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End Post Your Comment -->
                            <!-- ------------------------------------------------------------------------------------------------------------------------------ -->
                        </div>
                    </div>
                </div>
            </div>
                  




