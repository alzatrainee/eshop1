@using Microsoft.AspNetCore.Identity
@using Pernicek.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<script type="text/javascript">
    var ChangeLike = (function (id_com) {
        var like = "like";
        var MakeModel = {
            id_us: @UserManager.GetUserId(User),
            id_com: id_com,
            type: like
        }
        $.ajax({
            type: "POST",
            url: "/Comment/LikeThis",
            data: JSON.stringify(MakeModel),
            contentType: "application/json",
            success: function (data) {
                var likesOld = data.likesOld;
                var dislikesOld = data.dislikesOld;
                var likesNew = data.likesNew;
                var dislikesNew = data.dislikesNew;
                if (likesOld < likesNew) {
                    $('#like-' + id_com).html('<i class="material-icons">favorite</i>' + likesNew);
                } else if (likesOld > likesNew) {
                    $('#like-' + id_com).html('<i class="material-icons">favorite_border</i>' + likesNew);
                }
                if (dislikesOld < dislikesNew) {
                    $('#dislike-' + id_com).html('<span style="color: orange !important;"><i class="material-icons">thumb_down</i>' + dislikesNew + '</span>');
                } else if (dislikesOld > dislikesNew) {
                    $('#dislike-' + id_com).html(' <i class="material-icons">thumb_down</i>' + dislikesNew);
                }
            }
        })
        });

</script>

<script type="text/javascript">
    var ChangeSubLike = (function (id_com) {
        var like = "like";
        var MakeModel = {
            id_us: @UserManager.GetUserId(User),
            id_com: id_com,
            type: like
        }
        $.ajax({
            type: "POST",
            url: "/Comment/LikeThis",
            data: JSON.stringify(MakeModel),
            contentType: "application/json",
            success: function (data) {
                var likesOld = data.likesOld;
                var dislikesOld = data.dislikesOld;
                var likesNew = data.likesNew;
                var dislikesNew = data.dislikesNew;

                if (likesOld < likesNew) {
                    $('#sublike-' + id_com).html('<i class="material-icons">favorite</i>' + likesNew);
                } else if (likesOld > likesNew) {
                    $('#sublike-' + id_com).html('<i class="material-icons">favorite_border</i>' + likesNew);
                }
                if (dislikesOld < dislikesNew) {
                    $('#subdislike-' + id_com).html('<span style="color: orange !important;"><i class="material-icons">thumb_down</i>' + dislikesNew + '</span>');
                } else if (dislikesOld > dislikesNew) {
                    $('#subdislike-' + id_com).html(' <i class="material-icons">thumb_down</i>' + dislikesNew);
                }
            }
        })
        });

</script>